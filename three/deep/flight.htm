<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<link rel="shortcut icon" sizes="128x128" href="/canvas/paint/grass256_.png">
<link rel="apple-touch-icon" href="/canvas/paint/grass256_.png">
<style>
body { color:#000;background-color:#fff;margin:0px;overflow:hidden;font-family:Arial; }
</style>
<script src="/conet.js"></script>
<script src="/util/deep.js"></script>
<script src="/menu.js"></script>
<script src="/sound.js"></script>

<script src="/vecmath.js"></script>
<script src="/canvas/pd5.js"></script>
<script src="/three/threePd5.js"></script>
<script src="/three/deep/flight.js"></script>
</head><body>

<!--

<div id="container" style="background-color:#f00;padding:5px;margin:20px;"></div>

-->

<script type="importmap">

{
"imports": {
 "three": "https://cdn.jsdelivr.net/npm/three@v0.160.0/build/three.module.js",
 "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.160.0/examples/jsm/"
  }
,"im_ports": {
"three": "/three/r160/build/three.module.js",
"three/addons/": "/three/r160/examples/jsm/" 
}}
</script>
<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
import Stats from 'three/addons/libs/stats.module.js';
//import { XrUtil } from '/util/gfx/XrUtil.js';
window.THREE=THREE;
window.OrbitControls=OrbitControls;
window.Stats=Stats;
//window.XrUtil=XrUtil;

let o=flightInit({level:'noAi2',noGamesMenu:1});//container:document.getElementById('container')});
let s={};
if (0)
setInterval(function() {
  //---
  s=o.etState();
  //onsole.log(s);//.currentUnit);
  let su=s.units[0];
  su.x++;
  su.ay+=0.5;
  su.hp-=1;
  s.currentUnit=(s.currentUnit+1)%2;
  o.etState(s);
  //onsole.log(su.hp);
  //...
}
,3000);

if (0) 
Conet.download({fn:'/three/deep/flight/state0.json',f:function(v) {
  //---
  console.log('-->'+v);
  //...
}
});

if (0) 
(function() {
  //---
  let fn='/three/deep/flight/state0.json';
  //let fn='/three/deep/flight/state_noAi2_0.json';
  
  o.multiPlayerLoop({
  upload:function(env) {
    Conet.upload({fn:fn,data:JSON.stringify(env,undefined,' ')});//...
  }
  ,download:function(f) {
    //---
    Conet.download({fn:fn,f:f})
    //...
  }
  });
  //...
}
)();


</script></body>
</html><script>
//fr o,50
//fr o,54
//fr o,58
//fr o,58,5
//fr o,58,6
//fr p,5,73
